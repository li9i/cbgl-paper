This section serves the testing of the performance of state of the global
localisation art methods and CBGL with regard to solving Problem
\ref{prob:the_problem}, in varying environmental conditions and sensor
configurations. With regard to CBGL its three required parameters are set to
$(d_{\bm{l}},d_{\alpha},k) = (40, 2^5, 10)$ after initial tests with the
dataset used in subsection \ref{subsec:exp_a}.  The rationale of choosing
appropriate $d_{\bm{l}},d_{\alpha}$ is depicted in figure
\ref{fig:a:determine_40_32}, and $k$ is chosen as such in order to retain a
high-enough true positive discovery rate without significant increase in
execution time. The locational threshold $\delta_{\bm{l}} = 0.5$ m is used as
a tighter inlier determinator than that of \cite{Filotheou2022g}.
%(due to the application of scan--to--map-scan matching on $k$ pose estimates).
References to sets $\mathcal{H}_{\ast}$ are made to fig. \ref{fig:block_system}
(left) and lines
%\ref{alg:cbgl:h}, \ref{alg:cbgl:h1}, and \ref{alg:cbgl:h2} of
6, 9, and 13 of Algorithm
%\ref{alg:cbgl}
I \cite{Filotheou2023c}. All tests are performed with a processor of $12$
threads and a clock speed of $4.00$ GHz.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Experiments in real conditions}
\label{subsec:exp_a}

The first type of test is conducted using a Hokuyo UTM-30LX sensor, whose
angular range is $\lambda = 3\pi/2$ rad and radial range $r_{\max} = 30.0$ m,
in the  Electrical and Computer Engineering Department's Laboratory of Computer
Systems Architecture (CSAL), of the Aristotle University of Thessaloniki, a map of
which is depicted in figure \ref{fig:a:map_and_trajectory}. The sensor was
mounted on a Robotnik RB1 robot, which was teleoperated within the environment
while scans were being recorded.  This resulted in $N_{S}=6669$ range scans,
whose number of rays are downsampled by a factor of four before being inputted
to CBGL and ALS \cite{als_jp}. The latter implements Free-Space Features
\cite{als_eth}. Other global localisation methods are not to tested for this
type of experiment due to their infeasible execution time with respect to the
range dataset's volume (see fig. \ref{fig:b:execution_times}). CBGL's internal
\texttt{sm2} method is chosen to be PLICP \cite{Censi2008c} due to its low
execution time and the sensor's non-panoramic field of view. The top of figure
\ref{fig:a:awesomeness} depicts the proportion of output pose estimates from
each method whose position and orientation error is lower than outlier
thresholds $\delta_{\bm{l}}$, $\delta_{\theta}$; at the bottom they are
depicted exclusively for CBGL's output and its internal pose sets.
The mean and standard deviation of the two methods' execution times are
$(\mu_t^{\text{ALS}}, \sigma_t^{\text{ALS}}) = (6.15, 5.32)$ sec, and
$(\mu_t^{\text{CBGL}}, \sigma_t^{\text{CBGL}}) = (1.61, 0.06)$ sec. From the
experimental evidence it is clear that (a) Hypothesis \ref{hpt:hypothesis_h} is
observed to be true $991$ times out of a thousand for an outliers' locational
threshold $\delta_{\bm{l}} = 0.5$ m when an angular threshold is
$\delta_{\theta}$ is not considered, and (b) CBGL outperforms ALS in terms of
(i) number of pose estimates within all locational and angular thresholds and
(ii) execution time.

\begin{figure}
  \vspace{-0.3cm}
  \input{./figures/experiments/a/determine_40_32.tex}
  \vspace{-0.3cm}
  \caption{\small Top row and right column: histograms of the number of times
           when exactly $n \in [0,k] = [0,10]$ pose estimates belonging to set
           $\mathcal{H}_1$ exhibited pose errors lower than $\delta =
           (\delta_{\bm{l}}^2 + \delta_{\theta}^2)^{1/2} =  (0.3^2 +
           0.4^2)^{1/2} = 0.5$ (m$^2$ + rad$^2$)$^{1/2}$. For densities
           $(d_{\bm{l}},d_{\alpha}) = (40, 2^5)$ this number is strictly
           increasing with $n$. Middle block: percent proportion of pose
           estimates whose pose error is lower than $\delta$ for varying field
           densities. Bottom block: the distribution of corresponding execution
           times}
  \vspace{-0.5cm}
  \label{fig:a:determine_40_32}
\end{figure}


\begin{figure}
  \input{./figures/experiments/a/trajectory.tex}
  \vspace{-0.7cm}
  \caption{\small The map of the real environment CSAL (black), the trajectory
           of the sensor (blue), and CBGL's estimated positions of the sensor
           (green). Sensor poses for which CBGL's output exhibits position
           error larger than $\delta_{\bm{l}} = 0.5$ m are marked with red,
           sources of great range noise with cyan, and regions around doors
           with purple. A total of $N_S = 6669$ pose estimations take place.
           Estimation is performed for each sensor pose independently of
           previous estimates and measurements}
  \vspace{-0.5cm}
  \label{fig:a:map_and_trajectory}
\end{figure}

\begin{figure}
  \vspace{-0.4cm}
  \input{./figures/experiments/a/awesomeness.tex}
  \vspace{0.01cm}
  \caption{\small Proportions of pose estimates whose position and orientation
           error is lower than corresponding thresholds $\delta_{\bm{l}}$ and
           $\delta_{\theta}$. Top: ALS vs CBGL. Bottom: CBGL and internal pose
           estimate sets.  Approximately $77\%$ of all bottom-$k$ pose
           estimates---the contents of $\mathcal{H}_1$ sets, populated via rank
           fields as described in sections \ref{section:definitions} and
           \ref{section:the_proposed_method}---exhibit position errors lower
           than $\delta_{\bm{l}} = 0.5$ m for $k=10$, and so do over $99\%$ of
           CBGL's final pose estimates. The improvement in position and
           orientation induced by scan--to--map-scan matching is captured by
           the difference between the output (i.e.  $\mathcal{H}_2[\arg \min
           f_{\psi}^{\bm{M}}(\mathcal{H}_2)]$) and $\mathcal{H}_1[\arg \min
           f_{\psi}^{\bm{M}}(\mathcal{H}_2)]$}
  \vspace{-0.5cm}
  \label{fig:a:awesomeness}
\end{figure}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Simulations against sources of uncertainty}
\label{subsec:exp_b}

The second type of test concerns the main limiting factor of global
localisation methods, i.e. uncertainty---: arising e.g. from spurious
measurements, repeatability of surroundings, missing or corrupted range
information, or their combinations. For this reason the experimental procedure
of \cite{Filotheou2022g} is extended here for the two methods tested therein,
i.e.  PGL-FMIC and PGL-PLICP, and then for CBGL, ALS, MCL \cite{mcl}, and GMCL
\cite{gmcl}.  Specifically these methods are tested against the two most
challenging environments, i.e. WAREHOUSE and WILLOWGARAGE, in which a panoramic
range sensor is placed at $16$ different poses, respectively
$\bm{p}_{\ast}^{W}$ and $\bm{p}_{\ast}^{G}$, for $N = 100$ independent attempts
at global localisation per pose. The tests are conducted with the use of a
sensor whose number of rays $N_s = 360$, maximum range $r_{\max} = 10.0$ m, and
noise $\sim \mathcal{N}(0, 0.05^2)$ [m,m$^2$]. CBGL's internal \texttt{sm2} method
is chosen to be \texttt{x1} due to the periodicity of the
range signal, \texttt{x1}'s robust pose errors compared to \texttt{sm2} state
of the art methods, and its greater ability in matching scans captured from
higher initial displacements than ICP alternatives  \cite{Filotheou2023a}. The
latter translates to the need for smaller initial hypothesis sets: for each
environment the locational density is set to $3$\texttt{e}+04 divided by the
free space area of each environment. For Monte Carlo approaches MCL and GMCL
the number of initial hypotheses is also set to $3$\texttt{e}+04.

The maximum range of the sensor is such that the geometry of environment
WAREHOUSE causes (disorderly) extended lack of sampling of the sensor's
surrounding environment, which limits available information and may therefore
produce spurious measurements and increase \texttt{r}-field ambiguities between
candidate estimates. In WILLOWGARAGE, on the other hand, almost all sensor
placements result in complete sampling of its surroundings, but the sensor is
purposefully posed in such conditions as to challenge the localisation methods'
ability to perform fine distinctions between similar surroundings. Figure
\ref{fig:b:inliers_per_pose} depicts the percentage of outputs whose position
error is lower than $\delta_{\bm{l}} = 0.5$ m per tested pose, and figure
\ref{fig:b:execution_times} depicts the overall distribution of execution times
per tested environment and algorithm.
%CBGL's mean execution time in environment
%WAREHOUSE is $\mu_t^W = 7.98$ sec and in WILLOWGARAGE $\mu_t^{G} = 3.59$ sec.
Although the cardinality of set $\mathcal{H}$ is equal in both environments,
CBGL's execution times are uneven due to \texttt{x1}'s increased execution time
when dealing with scans with missing range information. Notwithstanding the
aforementioned sources of uncertainty, CBGL manages to exhibit the overall
highest number of poses whose position error is below $\delta_{\bm{l}} = 0.5$
m.

\begin{figure}
  \input{./figures/experiments/b/inliers_per_pose.tex}
  \caption{\small Percent proportions of pose outputs whose position error is
           lower than $\delta_{\bm{l}} = 0.5$ m per tested environment, pose,
           and method. Overall CBGL (green) features the highest number of
           inlier poses}
  \label{fig:b:inliers_per_pose}
\end{figure}

\begin{figure}
  \input{./figures/experiments/b/exec_times.tex}
  \vspace{0.1cm}
  \caption{\small Distribution of execution times per tested environment and
           algorithm in seconds for $N_s = 360$ rays. CBGL's execution time is
           at least eighteen times lower than other Monte Carlo approaches in
           WILLOWGARAGE and four times lower in WAREHOUSE}
  \label{fig:b:execution_times}
  \vspace{-0.5cm}
\end{figure}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Simulations against environmental and \texttt{sm2} algorithmic disparity}
\label{subsec:exp_c}

The third type of test aims to inquire how the performance of CBGL scales with
respect to increasing environment area (and therefore to increased number of
hypotheses), environment diversity, sensor angular range, and choice of
overlying \texttt{sm2} method. CBGL is tested once in each of
$N_E \simeq 4.5$\texttt{e}+$04$ environments, generated via the evaluation
procedure of \cite{Filotheou2023a}, which utilises five established and
publicly available benchmark datasets provided courtesy of the Department of
Computer Science, University of Freiburg \cite{datasets_link}.  Each coordinate
of the map of each environment is corrupted by noise
$\sim\mathcal{N}(0,0.05^2)$ [m, m$^2$]. The angular range of the range sensor
varies according to the overlying \texttt{sm2} method used: for
NDT \cite{ndt}, FastGICP \cite{fgi}, and FastVGICP \cite{fvg}: $\lambda =
3\pi/2$ rad; for \texttt{x1}: $\lambda = 2\pi$ rad. Measurement noise is
$\sim \mathcal{N}(0,0.03^2)$ [m,m$^2$]. As in subsection \ref{subsec:exp_a} the
choice of field densities and $k$ is $(d_{\bm{l}},d_{\alpha},k) = (40, 2^5,
10)$.

Figure \ref{fig:c:errors_and_time} illustrates that, with the exception of NDT,
all versions of CBGL exhibit mean positional errors less than $1.0$ m; its
combination with \texttt{x1} exhibits a mean error of approximately $0.5$ m.
The evidence illustrate that CBGL is robust to sensor angular range, as the
distributions of errors between bottom-$k$ ($\mathcal{H}_1$) sets are
virtually indistinguishable for $k=10$. Figure \ref{fig:c:time_analysis} shows
the execution time of CBGL combined with FastVGICP and \texttt{x1} as a
function of environmental area, and that with \texttt{x1}'s timing breakdown
with respect to (a) CBGL's total time minus \texttt{sm2} time and (b) computing
map-scans, as proportions of total execution time.

\begin{figure}
  \input{./figures/experiments/c/errors.tex}
  \vspace{0.1cm}
  \caption{\small Distributions of positional and orientational errors and of
           execution time of CBGL for varying choices of scan--to--map-scan
           matching methods. The errors of CBGL's internal $\mathcal{H}_1$ set
           are virtually unaffected by the decrease in angular range $\lambda$
           ($\lambda_{\text{NDT}} = \lambda_{\text{FastGICP}} =
           \lambda_{\text{FastVGICP}} = 3\pi/2 \neq \lambda_{\texttt{x1}} = 2\pi$)
           }
  \label{fig:c:errors_and_time}
\end{figure}

\begin{figure}
  \vspace{0.5cm}
  \input{./figures/experiments/c/time_analysis.tex}
  \vspace{0.6cm}
  \caption{\small Left: CBGL's execution time with respect to environment area
           for two choices of overlying scan--to--map-scan matching methods. In
           rough terms $\mu_t^{\text{CBGL}} \text{ [sec]} \simeq 10^{-2}\cdot area
           \text{ [} \text{m}^2 \text{]}$ for areas larger than 200 m$^2$.
           Right: Proportion of CBGL $\circ$ \texttt{x1}'s total execution time
           spent on (a) all operations up to and except for matching, and (b)
           computing map-scans, with respect to area}
  \vspace{-0.2cm}
  \label{fig:c:time_analysis}
\end{figure}
